(this.webpackJsonpaviasales_frontend=this.webpackJsonpaviasales_frontend||[]).push([[0],[,,,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(1),s=n(7),a=n.n(s),r=(n(16),n(8)),i=n(9),o=n(11),l=n(10),u=(n(17),n(0)),j=function(){return Object(u.jsx)("div",{children:"Error!"})},d=function(t){Object(o.a)(n,t);var e=Object(l.a)(n);function n(){var t;Object(r.a)(this,n);for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return(t=e.call.apply(e,[this].concat(s))).state={hasError:!1},t}return Object(i.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(u.jsx)(j,{}):this.props.children}}]),n}(c.Component),b=n(5),f=n(2);n(19);var h=function(){var t=Object(c.useState)(),e=Object(f.a)(t,2),n=e[0],s=e[1],a=Object(c.useState)([]),r=Object(f.a)(a,2),i=r[0],o=r[1],l=function(t){var e=Object(c.useState)(!0),n=Object(f.a)(e,2),s=n[0],a=n[1];return{get:function(e){return new Promise((function(n,c){fetch(t+e).then((function(t){return t.json()})).then((function(t){if(!t)return a(!1),c(t);a(!1),n(t)})).catch((function(t){a(!1),c(t)}))}))},post:function(e,n){return new Promise((function(c,s){fetch(t+e,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).then((function(t){if(!t)return a(!1),s(t);a(!1),c(t)})).catch((function(t){a(!1),s(t)}))}))},loading:s}}("https://front-test.beta.aviasales.ru/").get,u=Object(c.useState)(!0),j=Object(f.a)(u,2),d=j[0],b=j[1];return Object(c.useEffect)((function(){l("search").then((function(t){t&&s(Object.values(t))})).catch((function(t){return console.log(t)}))}),[]),Object(c.useEffect)((function(){n&&l("tickets?searchId=".concat(n)).then((function(t){o(t),b(!1)})).catch((function(t){return console.log(t)}))}),[n]),{tickets:i,loadin:d}};n(20);function m(t){return t=String(t).slice(1)?t:"0".concat(t)}function p(t,e){var n=e.slice(11,16),c=(t/60).toFixed(2),s=n.slice(0,2),a=n.slice(3),r=c.slice(0,2),i=c.slice(3);return i>=60&&(i-=60,r++),(a=Number.parseInt(i,10)+Number.parseInt(a,10))>=60&&(a-=60,s++),(s=Number.parseInt(r,10)+Number.parseInt(s,10))>=24&&(s-=24),r>=24&&(r-=24),i=m(i),r=m(r),{minutes:i,minutesDate:a=m(a),hours:r,hoursDate:s=m(s)}}var O=function(t){var e,n=t.item,c=n.price,s=n.segments,a=s[0],r=a.date,i=a.destination,o=a.duration,l=a.origin,j=a.stops,d=s[1],b=d.date,f=d.destination,h=d.duration,m=d.origin,O=d.stops,v=p(o,r),_=v.minutes,x=v.hours,g=v.hoursDate,N=v.minutesDate,k=p(h,b),C=k.minutes,y=k.hours,T=k.hoursDate,S=k.minutesDate;return Object(u.jsxs)("div",{className:"ticket",children:[Object(u.jsxs)("div",{className:"ticket__head",children:[Object(u.jsx)("div",{className:"ticket__price",children:"".concat((e=c,e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "))," P")}),Object(u.jsx)("div",{className:"ticket__logo",children:Object(u.jsx)("img",{src:"./img/S7-Logo.png",alt:"S7 Logo"})})]}),Object(u.jsxs)("div",{className:"ticket__body",children:[Object(u.jsxs)("div",{className:"ticket__body-there",children:[Object(u.jsxs)("div",{className:"ticket__origin",children:[Object(u.jsx)("div",{className:"ticket__cities",children:"".concat(l.toUpperCase(),"-").concat(i.toUpperCase())}),Object(u.jsx)("div",{className:"ticket__departure",children:"".concat(r.slice(11,16).toUpperCase(),"-").concat(g,":").concat(N)})]}),Object(u.jsxs)("div",{className:"ticket__duration",children:[Object(u.jsx)("div",{className:"ticket__action",children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(u.jsx)("div",{className:"ticket__time",children:"".concat(x,"\u0447 ").concat(_,"\u043c")})]}),Object(u.jsxs)("div",{className:"ticket__stops",children:[Object(u.jsx)("div",{className:"ticket__number-of-transplants",children:j.length>0?1===j.length?"".concat(j.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041aA"):"".concat(j.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"):null}),Object(u.jsx)("div",{className:"ticket__cities-transplants",children:j?j.map((function(t){return"".concat(t," ")})):null})]})]}),Object(u.jsxs)("div",{className:"ticket__body-back",children:[Object(u.jsxs)("div",{className:"ticket__origin",children:[Object(u.jsx)("div",{className:"ticket__cities",children:"".concat(m.toUpperCase(),"-").concat(f.toUpperCase())}),Object(u.jsx)("div",{className:"ticket__departure",children:"".concat(b.slice(11,16).toUpperCase(),"-").concat(T,":").concat(S)})]}),Object(u.jsxs)("div",{className:"ticket__duration",children:[Object(u.jsx)("div",{className:"ticket__action",children:"\u0412 \u041f\u0423\u0422\u0418"}),Object(u.jsx)("div",{className:"ticket__time",children:"".concat(y,"\u0447 ").concat(C,"\u043c")})]}),Object(u.jsxs)("div",{className:"ticket__stops",children:[Object(u.jsx)("div",{className:"ticket__number-of-transplants",children:O.length>0?1===O.length?"".concat(O.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041aA"):"".concat(O.length," \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041a\u0418"):null}),Object(u.jsx)("div",{className:"ticket__cities-transplants",children:O?O.map((function(t){return"".concat(t," ")})):null})]})]})]})]},c)};n(21);var v=function(t){var e=t.onlyTickets,n=t.filter,s=t.transplants,a=Object(c.useState)(5),r=Object(f.a)(a,2),i=r[0],o=r[1];!function(t){switch(t){case"withoutTransfers":return void(e=e.map((function(t){return t.filter((function(t){return 0===t.segments[0].stops.length}))})));case"1-Transfers":return void(e=e.map((function(t){return t.filter((function(t){return 1===t.segments[0].stops.length}))})));case"2-Transfers":return void(e=e.map((function(t){return t.filter((function(t){return 2===t.segments[0].stops.length}))})));case"3-Transfers":return void(e=e.map((function(t){return t.filter((function(t){return 3===t.segments[0].stops.length}))})));default:;}}(s),function(t){switch(t){case"cheap":return void(e=e.map((function(t){return t.sort((function(t,e){return t.price-e.price}))})));case"fast":return void(e=e.map((function(t){return t.sort((function(t,e){return t.segments[0].duration-e.segments[0].duration}))})));default:;}}(n);var l=e[0].filter((function(t,e){return e<i&&t}));return Object(u.jsxs)("div",{className:"tickets-carts",children:[l.map((function(t){return Object(u.jsx)(O,{item:t})})),Object(u.jsx)("button",{className:"btn-more",onClick:function(){o((function(t){return t+5}))},children:"\u041f\u041e\u041a\u0410\u0417\u0410\u0422\u042c \u0415\u0429\u0415 5 \u0411\u0418\u041b\u0415\u0422\u041e\u0412"})]})};n(22);var _=function(t){var e=t.onTransplantsChenge,n=t.nameMas,c=[{name:"all",label:"\u0412\u0441\u0435"},{name:"withoutTransfers",label:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"},{name:"1-Transfers",label:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"},{name:"2-Transfers",label:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},{name:"3-Transfers",label:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"}].map((function(t){var c=t.name,s=t.label,a=n.includes(c)?"label__box-active":"label__box";return Object(u.jsxs)("label",{className:a,children:[Object(u.jsx)("input",{type:"checkbox",name:c,onClick:function(){return e(c)}}),Object(u.jsx)("span",{className:"pseudocheckbox",children:s.toUpperCase()})]},c)}));return Object(u.jsxs)("div",{className:"numberOfTransplants",children:[Object(u.jsx)("div",{className:"numberOfTransplants__head",children:"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"}),Object(u.jsx)("div",{className:"numberOfTransplants__body",children:c})]})},x=(n(23),[{name:"cheap",label:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"},{name:"fast",label:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"}]);var g=function(t){var e=t.filter,n=t.onFilterChange,c=x.map((function(t){var c=t.name,s=t.label,a=c===e?"btn-active":"btn";return Object(u.jsx)("button",{type:"button",onClick:function(){return n(c)},className:a,children:s.toUpperCase()},c)}));return Object(u.jsx)("div",{className:"btn-group",children:c})};var N=function(){var t=Object(c.useState)(),e=Object(f.a)(t,2),n=e[0],s=e[1],a=Object(c.useState)(),r=Object(f.a)(a,2),i=r[0],o=r[1],l=h(),j=l.tickets,d=l.loadin,m=[],p=Object(c.useState)([]),O=Object(f.a)(p,2),x=O[0],N=O[1];if(d)return null;if(!d)for(var k=0,C=Object.entries(j);k<C.length;k++){var y=Object(f.a)(C[k],2),T=y[0],S=y[1];"tickets"===T&&m.push(S)}return Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)("img",{src:"./img/Logo.png",alt:"Logo",className:"logo"}),Object(u.jsxs)("div",{className:"app__body",children:[Object(u.jsx)(_,{onTransplantsChenge:function(t){if(x.includes(t)){var e=x.findIndex((function(e){return e===t}));N([].concat(Object(b.a)(x.slice(0,e)),Object(b.a)(x.slice(e+1))))}else o(t),N([].concat(Object(b.a)(x),[t]))},nameMas:x}),Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(g,{filter:n,onFilterChange:function(t){s(t)}}),Object(u.jsx)(v,{onlyTickets:m,filter:n,transplants:i})]})]})]})};a.a.render(Object(u.jsx)(d,{children:Object(u.jsx)(N,{})}),document.getElementById("root"))}],[[24,1,2]]]);
//# sourceMappingURL=main.2bc5b581.chunk.js.map